<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.manager.dao.StudentMapper">
    <!--<resultMap id="getSC" type="student">
        <id property="id" column="Sno"/>
        <result property="name" column="Sname"/>
        <result property="sex" column="Ssex"/>
        <result property="clazz" column="Sclass"/>
        <result property="phone" column="Sphone"/>
        <collection property="courseList" ofType="course">
            <id property="id" column="Cno"/>
            <result property="name" column="Cname"/>
            <result property="credit" column="Ccredit"/>
        </collection>
    </resultMap>-->
   <!-- <select id="getSCInfo" parameterType="long" resultMap="getSC">
        select s.*, c.*
        from sc, course c, student s
        where c.Cno = sc.Cno
        and sc.Sno = s.Sno
        and s.Sno = #{id};
    </select>-->

    <resultMap id="studentinfo" type="student">
        <id property="id" column="Sno"/>
        <result property="name" column="Sname"/>
        <result property="sex" column="Ssex"/>
        <result property="clazz" column="Sclass"/>
        <result property="phone" column="Sphone"/>
    </resultMap>

    <!-- 1. 根据 id 获取 student 信息-->
    <select id="getStudent" parameterType="long" resultMap="studentinfo">
        select * from student where Sno = #{id}
    </select>

    <!-- 2. 获取所有学生 -->
    <select id="getAllStudent" resultMap="studentinfo">
        select * from student
    </select>

    <!-- 3. 根据 id 删除学生-->
    <delete id="deleteStudent" parameterType="long">
        delete from student where Sno = #{id}
    </delete>

    <!-- 4. 增加学生信息 -->
    <insert id="insertStudent" parameterType="student">
        insert into student values(#{id}, #{name}, #{sex}, #{clazz}, #{phone})
    </insert>

    <!-- 5. 修改学生信息 -->
    <update id="updateStudent">
        update student
        set Sname=#{student.name},Ssex=#{student.sex},Sclass=#{student.clazz},Sphone=#{student.phone}
        where Sno=#{id}
    </update>
    
    <select id="getStudentByName" resultMap="studentinfo">
        select * from student where Sname like contact("%", #{name}, "%")
    </select>
</mapper>